<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>后台管理-登录</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    
    <!-- 外部资源引入（无需本地文件） -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/layui-src@2.6.3/dist/css/layui.css">
    <script src="https://cdn.jsdelivr.net/npm/layui-src@2.6.3/dist/layui.js"></script>
    
    <!-- IE兼容（可选，现代浏览器可删除） -->
    <!--[if lt IE 9]>
    <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
    <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <!-- Tailwind配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        purple: {
                            dark: '#4A148C',
                            medium: '#7B1FA2',
                            light: '#BA68C8'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <!-- 自定义工具类和样式 -->
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .star-glow {
                filter: blur(1px);
            }
        }

        /* 登录页面核心样式 */
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        .layui-container {
                   width: 100%;
                   height: 100%;
                   overflow: hidden;
                   position: relative;
               }
               .admin-login-background {
                   width: 360px;
                   position: absolute;
                   left: 50%;
                   top: 50%;
                   transform: translate(-50%, -50%);
                   z-index: 30; /* 确保表单在最上层 */
               }
               .logo-title {
                   text-align: center;
                   letter-spacing: 2px;
                   padding: 14px 0;
                   margin-bottom: 10px;
               }
               .logo-title h1 {
                   color: #1E9FFF;
                   font-size: 25px;
                   font-weight: bold;
                   line-height: 1.2;
               }
               .login-form {
                   background-color: rgba(255, 255, 255, 0.92);
                   border: 1px solid #f0f0f0;
                   border-radius: 8px;
                   padding: 20px;
                   box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
                   backdrop-filter: blur(8px);
               }
               .login-form .layui-form-item {
                   position: relative;
                   margin-bottom: 16px;
               }
               .login-form .layui-form-item label {
                   position: absolute;
                   left: 1px;
                   top: 1px;
                   width: 38px;
                   line-height: 36px;
                   text-align: center;
                   color: #999;
                   font-size: 16px;
               }
               .login-form .layui-form-item input {
                   padding-left: 36px;
                   border-radius: 4px;
                   height: 38px;
                   border-color: #e6e6e6;
               }
               .captcha {
                   width: 60%;
                   display: inline-block;
               }
               .captcha-img {
                   display: inline-block;
                   width: 36%;
                   float: right;
               }
               .captcha-img img {
                   height: 38px;
                   border: 1px solid #e6e6e6;
                   border-radius: 4px;
                   width: 100%;
                   cursor: pointer;
               }
               .layui-btn-fluid {
                   border-radius: 4px;
                   height: 38px;
                   font-size: 15px;
                   background-color: #1E9FFF;
                   border: none;
               }
               .layui-btn-fluid:hover {
                   background-color: #0e88d4;
               }
               .other {
                   margin: 18px auto 0;
                   text-align: center;
                   color: #666;
                   font-size: 13px;
               }
               .other a {
                   margin: 0 10px;
                   display: inline-block;
               }
               .other img {
                   width: 26px;
                   height: 26px;
                   vertical-align: middle;
                   border-radius: 50%;
                   transition: transform 0.2s;
               }
               .other img:hover {
                   transform: scale(1.1);
               }
               .layui-form-checkbox {
                   margin-top: 2px;
               }
    </style>
</head>
<body class="cursor-none">
    <!-- 1. 紫色渐变背景（底层） -->
    <div class="fixed inset-0 bg-gradient-to-br from-purple-dark via-purple-medium to-purple-light z-10"></div>
    
    <!-- 2. 星星动画画布（中层） -->
    <canvas id="starCanvas" class="fixed inset-0 z-20"></canvas>
    
    <!-- 3. 登录表单（顶层） -->
    <div class="layui-container">
        <div class="admin-login-background">
            <div class="layui-form login-form">
                <form class="layui-form" action="">
                    <div class="layui-form-item logo-title">
                        <h1>燃歌网上订餐</h1>
                        <h1>管理平台</h1>
                    </div>
                    
                    <!-- 用户名输入框 -->
                    <div class="layui-form-item">
                        <label class="layui-icon layui-icon-username" for="username"></label>
                        <input id="username" type="text" name="username" lay-verify="required|account" 
                               placeholder="用户名或者邮箱" autocomplete="off" class="layui-input" value="admin">
                    </div>
                    
                    <!-- 密码输入框 -->
                    <div class="layui-form-item">
                        <label class="layui-icon layui-icon-password" for="password"></label>
                        <input id="password" type="password" name="password" lay-verify="required|password" 
                               placeholder="密码" autocomplete="off" class="layui-input" value="123456">
                    </div>
                    
                    <!-- 验证码 -->
                    <div class="layui-form-item">
                        <label class="layui-icon layui-icon-vercode" for="captcha"></label>
                        <input id="captcha" type="text" name="captcha" lay-verify="required|captcha" 
                               placeholder="图形验证码" autocomplete="off" class="layui-input verification captcha" value="xszg">
                        <div class="captcha-img">
                            <img id="captchaPic" src="images/captcha.jpg" alt="验证码">
                        </div>
                    </div>
                    
                    <!-- 记住密码 -->
                    <div class="layui-form-item">
                        <input type="checkbox" name="rememberMe" value="true" lay-skin="primary" title="记住密码" checked>
                    </div>
                    
                    <!-- 登录按钮 -->
                    <div class="layui-form-item">
                        <button class="layui-btn layui-btn-normal layui-btn-fluid" lay-submit="" lay-filter="login">登 录</button>
                    </div>
                    
                    <!-- 第三方登录 -->
                  <div class="other">
                  其它方式登录
                  <a href="https://ti.qq.com/qqlevel/index"><img src="img/qq.png"/></a>
                  <a href="https://wx.qq.com/"><img src="img/weixin.png"/></a>
                  </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // ====================== 交互式星星背景核心代码 ======================
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('starCanvas');
            const ctx = canvas.getContext('2d');
            
            // 鼠标位置跟踪
            let mouse = {
                x: null,
                y: null,
                radius: 180 // 鼠标影响范围
            };
            
            // 设置画布尺寸（响应式）
            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // 监听鼠标移动
            window.addEventListener('mousemove', (event) => {
                mouse.x = event.x;
                mouse.y = event.y;
            });
            
            // 鼠标离开窗口时重置
            window.addEventListener('mouseout', () => {
                mouse.x = null;
                mouse.y = null;
            });
            
            // 星星类（含闪烁、旋转、跟随效果）
            class Star {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                    this.size = Math.random() * 2 + 1; // 星星大小：1-3px
                    this.baseSpeedX = (Math.random() - 0.5) * 0.3; // 基础移动速度
                    this.baseSpeedY = (Math.random() - 0.5) * 0.3;
                    this.speedX = this.baseSpeedX;
                    this.speedY = this.baseSpeedY;
                    this.points = Math.floor(Math.random() * 3) + 5; // 5-7个角的星星
                    this.angle = Math.random() * Math.PI * 2; // 初始旋转角度
                    this.rotationSpeed = (Math.random() - 0.5) * 0.01; // 旋转速度
                    this.brightness = Math.random() * 0.5 + 0.5; // 亮度：0.5-1
                    this.twinkleRate = Math.random() * 0.01; // 闪烁速率
                    this.color = this.getRandomColor();
                }
                
                // 随机星星颜色（紫色系渐变）
                getRandomColor() {
                    const starColors = [
                        'rgba(255, 255, 255, 0.9)',
                        'rgba(240, 240, 255, 0.8)',
                        'rgba(220, 220, 255, 0.7)',
                        'rgba(200, 200, 255, 0.6)',
                        'rgba(255, 220, 255, 0.7)'
                    ];
                    return starColors[Math.floor(Math.random() * starColors.length)];
                }
                
                // 更新星星状态（移动、旋转、闪烁）
                update() {
                    // 鼠标吸引力逻辑
                    if (mouse.x !== null && mouse.y !== null) {
                        const dx = mouse.x - this.x;
                        const dy = mouse.y - this.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        const force = (mouse.radius - distance) / mouse.radius;
                        
                        if (distance < mouse.radius) {
                            const angle = Math.atan2(dy, dx);
                            this.speedX = force * Math.cos(angle) * 0.5;
                            this.speedY = force * Math.sin(angle) * 0.5;
                        } else {
                            // 缓慢恢复基础速度
                            this.speedX += (this.baseSpeedX - this.speedX) * 0.05;
                            this.speedY += (this.baseSpeedY - this.speedY) * 0.05;
                        }
                    } else {
                        // 无鼠标时使用基础速度
                        this.speedX = this.baseSpeedX;
                        this.speedY = this.baseSpeedY;
                    }
                    
                    // 移动星星
                    this.x += this.speedX;
                    this.y += this.speedY;
                    
                    // 旋转星星
                    this.angle += this.rotationSpeed;
                    
                    // 闪烁效果（亮度变化）
                    this.brightness += this.twinkleRate;
                    if (this.brightness > 1) {
                        this.brightness = 1;
                        this.twinkleRate = -this.twinkleRate;
                    } else if (this.brightness < 0.3) {
                        this.brightness = 0.3;
                        this.twinkleRate = -this.twinkleRate;
                    }
                    
                    // 边界循环（星星出界后从对面进入）
                    if (this.x < 0) this.x = canvas.width;
                    if (this.x > canvas.width) this.x = 0;
                    if (this.y < 0) this.y = canvas.height;
                    if (this.y > canvas.height) this.y = 0;
                }
                
                // 绘制多角星（含光晕效果）
                draw() {
                    const radius = this.size;
                    const innerRadius = radius * 0.4; // 内角半径
                    const points = this.points;
                    
                    ctx.save();
                    ctx.translate(this.x, this.y); // 移动到星星位置
                    ctx.rotate(this.angle); // 旋转星星
                    ctx.beginPath();
                    
                    // 绘制星形路径
                    for (let i = 0; i < points * 2; i++) {
                        const r = i % 2 === 0 ? radius : innerRadius;
                        const angle = (i / points) * Math.PI - Math.PI / 2;
                        const x = r * Math.cos(angle);
                        const y = r * Math.sin(angle);
                        
                        i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
                    }
                    ctx.closePath();
                    
                    // 应用亮度和颜色
                    const color = this.color.replace(/rgba\((\d+), (\d+), (\d+), ([\d.]+)\)/, 
                        (match, r, g, b) => `rgba(${r}, ${g}, ${b}, ${this.brightness})`);
                    
                    // 绘制星星主体
                    ctx.fillStyle = color;
                    ctx.fill();
                    
                    // 绘制星星光晕（增强视觉效果）
                    ctx.fillStyle = color.replace(/rgba\((\d+), (\d+), (\d+), ([\d.]+)\)/, 
                        (match, r, g, b) => `rgba(${r}, ${g}, ${b}, ${this.brightness * 0.2})`);
                    ctx.beginPath();
                    ctx.arc(0, 0, radius * 2, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.restore();
                }
            }
            
            // 星星数组初始化
            const starsArray = [];
            const starCount = Math.floor((canvas.width * canvas.height) / 6000); // 按屏幕大小分配星星数量
            
            function initStars() {
                starsArray.length = 0;
                for (let i = 0; i < starCount; i++) {
                    starsArray.push(new Star());
                }
            }
            
            // 星星连线逻辑（增强互动感）
            function connectStars() {
                // 1. 星星之间连线
                for (let a = 0; a < starsArray.length; a++) {
                    for (let b = a + 1; b < starsArray.length; b++) {
                        const dx = starsArray[a].x - starsArray[b].x;
                        const dy = starsArray[a].y - starsArray[b].y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < 100) { // 距离小于100px时连线
                            const opacity = 1 - (distance / 100);
                            ctx.strokeStyle = `rgba(255, 255, 255, ${opacity * 0.4})`;
                            ctx.lineWidth = 0.8;
                            ctx.beginPath();
                            ctx.moveTo(starsArray[a].x, starsArray[a].y);
                            ctx.lineTo(starsArray[b].x, starsArray[b].y);
                            ctx.stroke();
                        }
                    }
                }
                
                // 2. 鼠标与星星连线
                if (mouse.x !== null && mouse.y !== null) {
                    for (let i = 0; i < starsArray.length; i++) {
                        const dx = mouse.x - starsArray[i].x;
                        const dy = mouse.y - starsArray[i].y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < mouse.radius) { // 鼠标影响范围内连线
                            const opacity = 1 - (distance / mouse.radius);
                            ctx.strokeStyle = `rgba(255, 240, 240, ${opacity * 0.5})`;
                            ctx.lineWidth = 1;
                            ctx.beginPath();
                            ctx.moveTo(mouse.x, mouse.y);
                            ctx.lineTo(starsArray[i].x, starsArray[i].y);
                            ctx.stroke();
                        }
                    }
                }
            }
            
            // 动画循环
            function animateStars() {
                ctx.clearRect(0, 0, canvas.width, canvas.height); // 清空画布
                
                // 更新并绘制所有星星
                for (let i = 0; i < starsArray.length; i++) {
                    starsArray[i].update();
                    starsArray[i].draw();
                }
                
                connectStars(); // 绘制连线
                requestAnimationFrame(animateStars); // 持续动画
            }
            
            // 初始化星星并启动动画
            initStars();
            animateStars();
            
            // 窗口大小改变时重新初始化星星
            window.addEventListener('resize', () => {
                resizeCanvas();
                initStars();
            });

            // ====================== 登录功能核心代码 ======================
            layui.use(['form', 'layer'], function () {
                const form = layui.form;
                const layer = layui.layer;

                // 防止iframe嵌套登录页
                if (top.location !== self.location) top.location = self.location;

                // 渲染LayUI表单（解决样式问题）
                form.render();

                // 验证码刷新功能
                $('#captchaPic').on('click', function() {
                    // 随机参数防止缓存
                    this.src = `https://picsum.photos/120/38?random=${Math.random()}`;
                });

                // 登录表单提交事件
                form.on('submit(login)', function (data) {
                    const field = data.field;
                    
                    // 表单验证
                    if (!field.username) {
                        layer.msg('用户名不能为空', {icon: 2, time: 1500});
                        return false;
                    }
                    if (!field.password) {
                        layer.msg('密码不能为空', {icon: 2, time: 1500});
                        return false;
                    }
                    if (!field.captcha) {
                        layer.msg('验证码不能为空', {icon: 2, time: 1500});
                        return false;
                    }

                    // 模拟登录请求（实际项目替换为接口请求）
                    layer.msg('登录成功', function () {
                                window.location = 'index.html';
                            });
                            return false;
                        });
                    });
					});
    </script>
</body>
</html>